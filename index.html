<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MYARA Studio Companion</title>
  <meta name="theme-color" content="#FFD4E1">
  <link rel="manifest" href="manifest.json">
  <style>
    /* --- Colors --- */
    :root{
      --hotpink:#cb2b65;
      --blue:#4c62a2;
      --lightpink:#edcfe1;
      --yellow:#e4e84c;
      --bg:#fff;
      --dark:#111216;
      --card:#edcfe1;
      --accent:#cb2b65;
    }

    /* --- Fonts --- */
    body, input, button, select, textarea {
      font-family: 'Inter', sans-serif;
      margin:0; padding:0;
      background:var(--bg); color:var(--dark);
    }

    /* --- Layout --- */
    body { display:flex; height:100vh; overflow:hidden; }
    nav { width:220px; background:var(--lightpink); padding:12px; display:flex; flex-direction:column; gap:12px; }
    nav button { background:none; border:none; padding:12px; text-align:left; font-weight:600; cursor:pointer; border-radius:8px; }
    nav button.active { background:var(--hotpink); color:white; }
    main { flex:1; padding:12px; overflow-y:auto; }

    /* --- Project Cards --- */
    .project-card { background:var(--card); padding:12px; border-radius:12px; margin-bottom:10px; box-shadow:0 4px 12px rgba(0,0,0,0.05); cursor:pointer; }
    .project-card h3 { margin:0; font-size:16px; }
    .pill { display:inline-block; padding:2px 6px; border-radius:999px; font-size:12px; margin-right:4px; background:var(--yellow); }
    .progress-bar { width:100%; height:10px; background:#f0f0f0; border-radius:999px; overflow:hidden; margin-top:6px; }
    .progress-fill { height:100%; background:linear-gradient(90deg,var(--hotpink),var(--blue)); width:0%; transition:width 0.3s; }

    /* --- Buttons --- */
    .btn { padding:8px 12px; border:none; border-radius:8px; background:var(--hotpink); color:white; cursor:pointer; font-weight:600; }
    .btn.secondary { background:var(--blue); }

    /* --- Responsive --- */
    @media(max-width:600px){
      body { flex-direction:column; }
      nav { width:100%; flex-direction:row; overflow-x:auto; }
      nav button { flex:1; white-space:nowrap; }
    }
  </style>
</head>
<body>

  <!-- Sidebar / Nav -->
  <nav>
    <button class="nav-btn active" data-section="projects">Projects</button>
    <button class="nav-btn" data-section="inspirations">Inspirations</button>
    <button class="nav-btn" data-section="tasks">Tasks</button>
    <button class="nav-btn" data-section="settings">Settings</button>
  </nav>

  <!-- Main Content -->
  <main id="main-panel">
    <h1>Projects</h1>
    <div id="project-list"></div>
    <button class="btn" id="btnNewProject">+ New Project</button>
  </main>

  <script>
    // --- Data storage ---
    const LSKEY = 'myara_projects_v2';
    let projects = JSON.parse(localStorage.getItem(LSKEY)||'[]');

    // --- DOM Elements ---
    const mainPanel = document.getElementById('main-panel');
    const projectList = document.getElementById('project-list');
    const navButtons = document.querySelectorAll('.nav-btn');
    const btnNewProject = document.getElementById('btnNewProject');

    // --- Navigation ---
    navButtons.forEach(btn=>{
      btn.onclick = ()=>{
        navButtons.forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        const section = btn.dataset.section;
        renderSection(section);
      };
    });

    // --- Render Sections ---
    function renderSection(section){
      mainPanel.innerHTML = '';
      if(section==='projects'){
        mainPanel.innerHTML = '<h1>Projects</h1><div id="project-list"></div><button class="btn" id="btnNewProject">+ New Project</button>';
        projectList = document.getElementById('project-list');
        renderProjects();
        document.getElementById('btnNewProject').onclick = addProject;
      } else {
        mainPanel.innerHTML = '<h1>'+section.charAt(0).toUpperCase()+section.slice(1)+'</h1><p>Coming soon...</p>';
      }
    }

    // --- Render Project List ---
    function renderProjects(){
      projectList.innerHTML = '';
      if(projects.length===0) projectList.innerHTML='<p>No projects yet</p>';
      projects.forEach((p,index)=>{
        const div = document.createElement('div');
        div.className='project-card';
        div.innerHTML = `<h3 contenteditable="true">${p.title}</h3>
          <div class="pill">${p.status||'Not started'}</div>
          <div class="progress-bar"><div class="progress-fill" style="width:${p.progress||0}%"></div></div>`;
        div.querySelector('h3').onblur = (e)=>{ p.title=e.target.textContent; saveState(); };
        projectList.appendChild(div);
      });
    }

    // --- Add New Project ---
    function addProject(){
      const newP = { title:'Untitled Project', status:'Not started', progress:0 };
      projects.unshift(newP);
      saveState();
      renderProjects();
    }

    // --- Save to localStorage ---
    function saveState(){
      localStorage.setItem(LSKEY, JSON.stringify(projects));
    }

    // --- Initial render ---
    renderSection('projects');

    // --- Service Worker ---
    if('serviceWorker' in navigator){
      navigator.serviceWorker.register('sw.js').catch(e=>console.log('SW failed',e));
    }
  </script>
</body>
</html>
